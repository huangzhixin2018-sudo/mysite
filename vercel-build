#!/bin/bash

# Vercel构建脚本
echo "开始Vercel构建..."

# 显示Python版本
python --version
pip --version

# 升级pip
pip install --upgrade pip

# 安装依赖
echo "安装Python依赖..."
pip install -r requirements.txt

# 显示已安装的包
echo "已安装的包："
pip list

# 收集静态文件
echo "收集静态文件..."
python manage.py collectstatic --noinput --settings=mysite.settings_production

# 运行数据库迁移
echo "运行数据库迁移..."
python manage.py migrate --settings=mysite.settings_production

echo "构建完成！"
